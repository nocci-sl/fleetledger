services:
  fleetledger:
    image: ghcr.io/nocci-sl/fleetledger:latest
    container_name: fleetledger
    env_file:
      - .env
    environment:
      SESSION_SECRET: ${SESSION_SECRET:?Set SESSION_SECRET in .env}
      SESSION_COOKIE_SECURE: ${SESSION_COOKIE_SECURE:-1}
      ENCRYPTION_KEY: ${ENCRYPTION_KEY:-}
      ALLOW_SELF_REGISTRATION: ${ALLOW_SELF_REGISTRATION:-0}
      DATABASE_PATH: ${DATABASE_PATH:-/app/data/fleetledger.db}
    volumes:
      - ./data:/app/data
    ports:
      - "8000:8000"
    restart: unless-stopped
